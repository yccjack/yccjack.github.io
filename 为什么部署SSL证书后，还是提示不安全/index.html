<!DOCTYPE html>
<html>
<head hexo-theme='https://github.com/volantis-x/hexo-theme-volantis/releases/tag/3.0.0'>
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
    
  
  <!-- 渲染优化 -->
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- 页面元数据 -->
  
  <title>为什么部署SSL证书后还是提示不安全 - MysticalYcc</title>
  
    <meta name="keywords" content="服务器,ssl,网站,https">
  

  
    <meta name="description" content="
很多朋友可能都会遇到这个让人抓狂的问题：为什么按要求部署SSL证书了，但访问网站时还是会出现不安全的提示？这里就和大家一起来看看可能导致这个问题的原因和解决方法。">
  

  <!-- feed -->
  

  <!-- import meta -->
  

  <!-- link -->
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13/css/all.min.css">

  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css">

  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

  

  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">

  

  
    <link rel="shortcut icon" type='image/x-icon' href="https://gschaos.club/ico/favicon.ico">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
  

  

  <!-- import link -->
  

  
  
    
<link rel="stylesheet" href="/css/style.css">

  

  
  
</head>

<body>
  
  
  
  <div class="cover-wrapper">
    <cover class='cover post' style="display: none;">
      <div class='cover-body'>
  <div class='a'>
    
      <img no-lazy class='logo' src='https://gschaos.club/ico/me.jpg'/>
    
    
      <p class="title">MysticalYcc</p>
    
    
      <p class="subtitle">浮华三千里，逍遥独一人。</p>
    
  </div>
  <div class='b'>
    <div class='menu navigation dock'>
      <div class='list-h'>
        
      </div>
    </div>
  </div>
</div>

      <div class="scroll-down" style="display: none;"><i class="fa fa-chevron-down scroll-down-effects"></i></div>
    </cover>
    <header class="l_header shadow blur">
  <div class='container'>
  <div class='wrapper'>
    <div class='nav-sub'>
      <p class="title"></p>
      <ul class='switcher nav-list-h m-phone' id="pjax-header-nav-list">
        <li><a class="s-comment fas fa-comments fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
          <li><a class="s-toc fas fa-list fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href='/'>
          
            <img no-lazy class='logo' src='https://gschaos.club/ico/me.jpg'/>
          
          
          
        </a>
      

			<div class='menu navigation'>
				<ul class='nav-list-h m-pc'>
          
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/friends/
                  
                  
                  
                    id="friends"
                  >
                  <i class='fas fa-link fa-fw'></i>友链
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/about/
                  
                  
                  
                    id="about"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>关于
                </a>
                
              </li>
            
          
          
				</ul>
			</div>

      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fas fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="Search..." />
        </form>
      </div>

			<ul class='switcher nav-list-h m-phone'>
				
					<li><a class="s-search fas fa-search fa-fw" target="_self" href='javascript:void(0)'></a></li>
				
				<li>
          <a class="s-menu fas fa-bars fa-fw" target="_self" href='javascript:void(0)'></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/friends/
                  
                  
                  
                    id="friends"
                  >
                  <i class='fas fa-link fa-fw'></i>友链
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/about/
                  
                  
                  
                    id="about"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>关于
                </a>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>
		</div>
	</div>
  </div>
</header>

  </div>
  


  <div class="l_body nocover">
    <div class='body-wrapper' id="pjax-container">
      
        <!--此文件用来存放一些不方便取值的变量--> 
<!--思路大概是将值藏到重加载的区域内--> 
 
 
 
<div id="pjax-data" style="display: none"> 
  <div id="pjax-ispage">true</div> 
  <div id="pjax-pageTitle">为什么部署SSL证书后还是提示不安全</div> 
  <div id="pjax-enable-cover">true</div> 
  <div id="pjax-comment-path">none</div> 
  <div id="pjax-comment-placeholder">none</div> 
</div> 
 
 
<script> 
  // 处理封面 此时 jquery 还没加载 
  if ("none" == "none") { // 移除封面 
    document.getElementsByClassName('cover')[0].style.display = "none"; 
    document.getElementsByClassName('l_body')[0].classList.add("nocover"); 
    document.getElementsByClassName('l_header', 'cover-wrapper')[0].classList.add("show"); 
  } else { 
    if ("none" == "blog") { // 半屏 
      document.getElementsByClassName('cover')[0].classList.remove("full"); 
      document.getElementsByClassName('cover')[0].classList.add("half"); 
      document.getElementsByClassName('scroll-down')[0].style.display = "none"; 
    } else if ("none" == "docs") { // 全屏 
      document.getElementsByClassName('cover')[0].classList.remove("half"); 
      document.getElementsByClassName('cover')[0].classList.add("full"); 
      document.getElementsByClassName('scroll-down')[0].style.display = ""; 
    } 
    document.getElementsByClassName('cover')[0].style.display = ""; 
    document.getElementsByClassName('l_body', 'show')[0].classList.remove("nocover"); 
    document.getElementsByClassName('l_header', 'cover-wrapper')[0].classList.remove("show"); 
  } 
</script> 

      
      

<div class='l_main'>
  

  
    <article id="post" class="post white-box reveal shadow article-type-post" itemscope itemprop="blogPost">
      


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h1 class="title">
    <a href="/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%83%A8%E7%BD%B2SSL%E8%AF%81%E4%B9%A6%E5%90%8E%EF%BC%8C%E8%BF%98%E6%98%AF%E6%8F%90%E7%A4%BA%E4%B8%8D%E5%AE%89%E5%85%A8/">
      为什么部署SSL证书后还是提示不安全
    </a>
  </h1>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a class='author' href="/" rel="nofollow">
    <img no-lazy src="">
    <p>MysticalYcc</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/%E7%BD%91%E7%AB%99/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>网站</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>发布于：2020年9月9日</p>
  </a>
</div>

            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


      <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
          
          
          <p><img src="https://mysticalyu.gitee.io/pic/img/20200407235705-www-ycfcg-com-3.jpg" alt="img"></p>
<p>很多朋友可能都会遇到这个让人抓狂的问题：为什么按要求部署SSL证书了，但访问网站时还是会出现不安全的提示？这里就和大家一起来看看可能导致这个问题的原因和解决方法。</p>
 <a id="more"></a>



<h1 id="为什么部署SSL证书后，还是提示不安全"><a href="#为什么部署SSL证书后，还是提示不安全" class="headerlink" title="为什么部署SSL证书后，还是提示不安全"></a>为什么部署SSL证书后，还是提示不安全</h1><p>很多朋友可能都会遇到这个让人抓狂的问题：为什么按要求部署SSL证书了，但访问网站时还是会出现不安全的提示？这里<a target="_blank" rel="noopener" href="https://www.bisend.cn/">必盛云</a>就和大家一起来看看可能导致这个问题的原因和解决方法。</p>
<p>首先我们来看看为什么会出现不安全提示：</p>
<p>当我们访问一个已安装<a target="_blank" rel="noopener" href="https://www.bisend.cn/ssl-certificate">SSL证书</a>的网站页面时，如果页面出现”您的连接不是私密链接“或”此网页含有不安全的内容“等类似的错误提示，这说明浏览器检查到你当前所访问的HTTPS网站的SSL证书出现问题了，存在访问风险，所以提示用户“此站点不安全”。</p>
<p>那么这个问题是怎么出现的呢？要怎样才能解决呢？请看下面的分析：</p>
<h3 id="域名不匹配"><a href="#域名不匹配" class="headerlink" title="域名不匹配"></a>域名不匹配</h3><p>HTTPS网站其中一个非常重要的作用，就是确认网站的身份。这样就能非常有效地预防DNS劫持。一张SSL证书必须对应一个网站域名，当你访问的网站域名和SSL证书中设置的域名不一致时，浏览器就会提示用户网站不安全。可能是由于配置错误导致SSL证书与网站域名不配置，也可能因为多个域名都能使用同一张SSL证书，导致域名与SSL证书不匹配。</p>
<p>此种情况下，需要站长确认域名与所部署的SSL证书是否相匹配，如不匹配需及时替换为正确的证书。</p>
<h3 id="证书到期"><a href="#证书到期" class="headerlink" title="证书到期"></a>证书到期</h3><p>这个原因非常好理解，即您的SSL证书到期需要续费重新申请了； SSL证书过期也是导致出现错误的原因之一。一般SSL证书的有效期为1~2年，当证书过期后，就必须要更新证书，HTTPS网站才能继续正常工作。否则过了有效期就会提示错误。可能有的站长管理很多网站，在证书到期之后重新安装会非常耗时，希望申请证书的有效期能长一点，但从CA（Certificate Authority证书颁发机构）的角度来看，设置证书有效期是非常有必要的。</p>
<p>首先是为了安全考虑，CA机构不能保证一个网站永远是合法的，因此它需要定期检查网站。其次，涉及到证书吊销。当网站的私钥丢失时，网站应该向CA申请将他们的证书加入到证书吊销列表（CRL）里。当用户访问https站点时，浏览器会自动向CA请求吊销列表，如果用户访问的站点提供的证书在CRL里，浏览器就不信任这个证书，因为攻击者可能拥有同样的证书。所以如果证书永久有效，随着越来越多的私钥丢失，吊销列表也越来越大，因为只有加进去的，没有剔出去的，这既给CA增加流量压力，也会增加浏览器的流量。而一旦有效期只有几年，那么CA就可以将那些已经过期了的证书从CRL里剔除，因为反正浏览器也不信任过期证书。</p>
<h3 id="系统时间错误"><a href="#系统时间错误" class="headerlink" title="系统时间错误"></a>系统时间错误</h3><p>另外一个常见的原因，是客户端的系统时间错误。浏览器会判断SSL证书是否过期，而浏览器的时间判断是依照你的系统时间。假如你的系统时间不正确，那么很有可能浏览器就会出现误判的情况，导致一张还没过期的SSL证书被认为是过期了。最终页面显示错误提示。解决办法也非常简单，修改您的系统时间为正确的就可以了。</p>
<h3 id="不受信任的SSL证书"><a href="#不受信任的SSL证书" class="headerlink" title="不受信任的SSL证书"></a>不受信任的SSL证书</h3><p>一些站长或者个人站长由于经费上的预算有限，又恰好懂得一些代码，自己制作出一张自签名的SSL证书或向一些SSL证书服务商申请不受信任的SSL证书。但现在浏览器对SSL证书的管理也更加严格，这些使用自签名SSL证书或不受信任的SSL证书部署的网站是不被浏览器信任的，所以访问时仍然会出现错误提示。因为自签名证书或小型SSL证书并不在操作系统的可信任根证书之中。只有是由受信任根证书所签发出来的SSL证书，浏览器才会认为是安全的，其他的SSL证书浏览器一律都会提示错误。</p>
<h3 id="站内调用非HTTPS素材"><a href="#站内调用非HTTPS素材" class="headerlink" title="站内调用非HTTPS素材"></a>站内调用非HTTPS素材</h3><p>站内调用非HTTPS素材包括图文、CSS、js等素材。出现这种情形时，一般在浏览器安全锁处会看到锁出现了一个三角形图形，点击查看SSL证书详细信息能看到有感叹号说明。下面我们就来看看如何解决这一问题：</p>
<p>首先您可以通过按住键盘上的F12键进入开发者模式，或者鼠标放在页面空白处点击右键后选择“查看网页源代码”，之后就可以在右侧边框找是哪些非安全链接导至整个网站不被信任。</p>
<p><img src="https://www.bisend.cn/blog/wp-content/uploads/2019/09/1.jpeg" alt="img"></p>
<p>查看上图中找到的两个链接，的确是http的素材路径。</p>
<p><img src="https://www.bisend.cn/blog/wp-content/uploads/2019/09/2.jpeg" alt="img"></p>
<p>那么现在我们需要做的就是检查这两个链接是否为有用链接；如果这个链接没有什么作用，删掉也不会对网站有任何影响，那么直接删除就行了。然后继续检查直至清除所有无用的非安全链接。完成清理后，再清除浏览器缓存，则可以看到网站已经重新被浏览器信任了。</p>
<p><img src="https://www.bisend.cn/blog/wp-content/uploads/2019/09/u20jw3wl6p.jpeg" alt="img"></p>
<p>现在再来看看第二种情况，如果这个元素或图片/CSS/JS是对网站极为重要的内容，绝对不可以删除。此时，则只需把源站的非安全素材的路径由绝对路径放置在本站文件夹变成相对路径。</p>
<h1 id="什么是混合内容？"><a href="#什么是混合内容？" class="headerlink" title="什么是混合内容？"></a>什么是混合内容？</h1><p><strong>混合内容</strong>在以下情况下出现：初始 HTML 内容通过安全的 HTTPS 连接加载，但其他资源（例如，图像、视频、样式表、脚本）则通过不安全的 HTTP 连接加载。之所以称为混合内容，是因为同时加载了 HTTP 和 HTTPS 内容以显示同一个页面，且通过 HTTPS 加载的初始请求是安全的。现代浏览器会针对此类型的内容显示警告，以向用户表明此页面包含不安全的资源。</p>
<h3 id="TL-DR"><a href="#TL-DR" class="headerlink" title="TL;DR"></a>TL;DR</h3><ul>
<li>HTTPS 对于保护您的网站和用户免受攻击非常重要。</li>
<li>混合内容会降低您的 HTTPS 网站的安全性和用户体验。</li>
</ul>
<h2 id="资源请求和网络浏览器"><a href="#资源请求和网络浏览器" class="headerlink" title="资源请求和网络浏览器"></a>资源请求和网络浏览器</h2><p>当浏览器访问网站的页面时，它将请求 HTML 资源。然后，网络服务器返回 HTML 内容，浏览器进行解析并显示给用户。通常，一个 HTML 文件不足以显示一个完整页面，因此，HTML 文件包含浏览器需要请求的其他资源的引用。这些子资源可以是图像、视频、额外 HTML、CSS 或 JavaScript 之类的资源；每个资源均使用单独的请求获取。</p>
<h2 id="HTTPS-的优势"><a href="#HTTPS-的优势" class="headerlink" title="HTTPS 的优势"></a>HTTPS 的优势</h2><p>当浏览器通过 HTTPS（HTTP Secure 的缩写形式）请求资源时，它使用一个已加密连接与网络服务器进行通信。</p>
<p>使用 HTTPS 有三个主要优势：</p>
<ul>
<li>身份验证</li>
<li>数据完整性</li>
<li>保密性</li>
</ul>
<h3 id="身份验证"><a href="#身份验证" class="headerlink" title="身份验证"></a>身份验证</h3><p>我正在访问的网站是正确的吗？</p>
<p>HTTPS 让浏览器检查并确保其已打开正确的网站，并且没有被重定向到恶意的网站。 当导航到您的银行网站时，您的浏览器对该网站进行身份验证，从而防止攻击者冒充您的银行窃取您的登录凭据。</p>
<h3 id="数据完整性"><a href="#数据完整性" class="headerlink" title="数据完整性"></a>数据完整性</h3><p>是否有人篡改我正在发送或接收的内容？</p>
<p>HTTPS 让浏览器检测是否有攻击者更改了浏览器接收的任何数据。 使用您的银行网站转账时，这样做可防止当您的请求在传输中时攻击者更改目标帐号。</p>
<h3 id="保密性"><a href="#保密性" class="headerlink" title="保密性"></a>保密性</h3><p>是否有人能看到我正在发送或接收的内容？</p>
<p>HTTPS 可防止攻击者窃取浏览器的请求，跟踪访问的网站或窃取已发送或接收的信息。</p>
<h3 id="HTTPS、传输层安全协议-TLS-和-SSL"><a href="#HTTPS、传输层安全协议-TLS-和-SSL" class="headerlink" title="HTTPS、传输层安全协议 (TLS) 和 SSL"></a>HTTPS、传输层安全协议 (TLS) 和 SSL</h3><p>HTTPS 是 HTTP Secure 的缩写，即超文本传输安全协议。此处的 <strong>secure</strong> 部分来自于添加到浏览器发送和接收的请求的加密。目前大多数浏览器都使用传输层安全协议 (TLS) 提供加密；<strong>TLS</strong> 有时称为 SSL。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/HTTPS">Wikipedia HTTPS</a></li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Transport_Layer_Security">Wikipedia TLS</a></li>
<li><a target="_blank" rel="noopener" href="https://www.khanacademy.org/computing/computer-science/cryptography">可汗学院 (Khan Academy) 的加密课程</a></li>
<li><a target="_blank" rel="noopener" href="https://hpbn.co/">高性能浏览器网络</a>（作者：Ilya Grigorik）中的<a target="_blank" rel="noopener" href="https://hpbn.co/transport-layer-security-tls/">传输层安全协议 (TLS) 章节</a></li>
</ul>
<h2 id="混合内容会降低-HTTPS-的安全性"><a href="#混合内容会降低-HTTPS-的安全性" class="headerlink" title="混合内容会降低 HTTPS 的安全性"></a>混合内容会降低 HTTPS 的安全性</h2><p>使用不安全的 HTTP 协议请求子资源会降低整个页面的安全性，因为这些请求容易受到<strong>中间人攻击</strong>，攻击者窃听网络连接，查看或修改双方的通信。通过使用这些资源，攻击者通常可以完全控制页面，而不只是泄露的资源。</p>
<p>尽管许多浏览器向用户报告混合内容警告，但出现警告时为时已晚：不安全的请求已被执行，且页面的安全性被破坏。遗憾的是，这种情况在网络中很普遍，正因如此，浏览器不能简单地阻止所有混合请求，否则将会限制许多网站的功能。</p>
<p><img src="https://developers.google.com/web/fundamentals/security/prevent-mixed-content/imgs/image-gallery-warning.png?hl=zh-cn" alt="混合内容：页面已通过 HTTPS 加载，但请求了不安全的图像。此内容也应通过 HTTPS 提供。">修正应用中的混合内容问题是开发者的责任。</p>
<h3 id="一个简单的示例"><a href="#一个简单的示例" class="headerlink" title="一个简单的示例"></a>一个简单的示例</h3><p>从 HTTPS 页面加载不安全的脚本。</p>
<p>查看通过 <strong>HTTPS</strong>—<a target="_blank" rel="noopener" href="https://googlesamples.github.io/web-fundamentals/fundamentals/security/prevent-mixed-content/simple-example.html"><strong>https</strong>://googlesamples.github.io/web-fundamentals/…/simple-example.html</a>加载的此示例页面 — 添加一个 <strong>HTTP</strong> 脚本标记，其尝试加载混合内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;edge&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1&quot;&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;fonts.googleapis.com&#x2F;icon?family&#x3D;Material+Icons&quot;&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;code.getmdl.io&#x2F;1.2.1&#x2F;material.indigo-pink.min.css&quot;&gt;</span><br><span class="line">    &lt;script defer src&#x3D;&quot;https:&#x2F;&#x2F;code.getmdl.io&#x2F;1.2.1&#x2F;material.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      body &#123;</span><br><span class="line">        margin: 2em;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;&#x2F;style&gt;</span><br><span class="line">    &lt;title&gt;Simple mixed content example&lt;&#x2F;title&gt;</span><br><span class="line">  &lt;&#x2F;head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div role&#x3D;&quot;main&quot;&gt;</span><br><span class="line">      &lt;h1&gt;</span><br><span class="line">        Simple mixed content example!</span><br><span class="line">      &lt;&#x2F;h1&gt;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        View page over: &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;simple-example.html&quot;&gt;HTTP&lt;&#x2F;a&gt; - &lt;a href&#x3D;&quot;https:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;simple-example.html&quot;&gt;HTTPS&lt;&#x2F;a&gt;</span><br><span class="line">      &lt;&#x2F;p&gt;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        This page loads the script simple-example.js using HTTP. This is the simplest case of mixed content. When the simple-example.js file is requested by the browser, an attacker can inject code into the returned content and take control of the entire page. Thankfully, most modern browsers block this type of dangerous content by default and display an error in the JavaScript console. This can be seen when the page is viewed over HTTPS.</span><br><span class="line">      &lt;&#x2F;p&gt;</span><br><span class="line">      &lt;div id&#x3D;&quot;output&quot;&gt;Waiting for insecure script to run...&lt;&#x2F;div&gt;</span><br><span class="line">      &lt;script src&#x3D;&quot;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;simple-example.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">  (function(b,o,i,l,e,r)&#123;b.GoogleAnalyticsObject&#x3D;l;b[l]||(b[l]&#x3D;</span><br><span class="line">  function()&#123;(b[l].q&#x3D;b[l].q||[]).push(arguments)&#125;);b[l].l&#x3D;+new Date;</span><br><span class="line">  e&#x3D;o.createElement(i);r&#x3D;o.getElementsByTagName(i)[0];</span><br><span class="line">  e.src&#x3D;&#39;https:&#x2F;&#x2F;www.google-analytics.com&#x2F;analytics.js&#39;;</span><br><span class="line">  r.parentNode.insertBefore(e,r)&#125;(window,document,&#39;script&#39;,&#39;ga&#39;));</span><br><span class="line">  ga(&#39;create&#39;,&#39;UA-52746336-1&#39;);ga(&#39;send&#39;,&#39;pageview&#39;);</span><br><span class="line">  var isCompleted &#x3D; &#123;&#125;;</span><br><span class="line">  function sampleCompleted(sampleName)&#123;</span><br><span class="line">    if (ga &amp;&amp; !isCompleted.hasOwnProperty(sampleName)) &#123;</span><br><span class="line">      ga(&#39;send&#39;, &#39;event&#39;, &#39;WebCentralSample&#39;, sampleName, &#39;completed&#39;); </span><br><span class="line">      isCompleted[sampleName] &#x3D; true;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">  &lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://googlesamples.github.io/web-fundamentals/fundamentals/security/prevent-mixed-content/simple-example.html">试一下</a></p>
<p>在此示例中，使用一个 <strong>HTTP</strong> 网址加载脚本 <code>simple-example.js</code>。这是最简单的混合内容案例。浏览器请求 <code>simple-example.js</code> 文件时，攻击者可以将代码注入返回的内容，并控制整个页面。</p>
<p>幸运的是，大多数现代浏览器均默认阻止此类危险的内容。 请参阅<a target="_blank" rel="noopener" href="https://developers.google.com/web/fundamentals/security/prevent-mixed-content/what-is-mixed-content?hl=zh-cn#browser-behavior-with-mixed-content">具有混合内容的浏览器行为</a>。</p>
<p><img src="https://developers.google.com/web/fundamentals/security/prevent-mixed-content/imgs/simple-mixed-content-error.png?hl=zh-cn" alt="混合内容：页面已通过 HTTPS 加载，但请求了不安全的脚本。此请求已被阻止，内容必须通过 HTTPS 提供。">Chrome 可阻止不安全的脚本。</p>
<h3 id="一个-XMLHttpRequest-示例"><a href="#一个-XMLHttpRequest-示例" class="headerlink" title="一个 XMLHttpRequest 示例"></a>一个 XMLHttpRequest 示例</h3><p>通过 XMLHttpRequest 加载不安全的数据。</p>
<p>查看通过 <strong>HTTPS</strong>—<a target="_blank" rel="noopener" href="https://googlesamples.github.io/web-fundamentals/fundamentals/security/prevent-mixed-content/xmlhttprequest-example.html"><strong>https</strong>://googlesamples.github.io/web-fundamentals/…/xmlhttprequest-example.html</a> 加载的此示例页面 — 添加一个通过 <strong>HTTP</strong> 加载的<code>XMLHttpRequest</code>，以获取混合内容 <code>JSON</code> 数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;edge&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1&quot;&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;fonts.googleapis.com&#x2F;icon?family&#x3D;Material+Icons&quot;&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;code.getmdl.io&#x2F;1.2.1&#x2F;material.indigo-pink.min.css&quot;&gt;</span><br><span class="line">    &lt;script defer src&#x3D;&quot;https:&#x2F;&#x2F;code.getmdl.io&#x2F;1.2.1&#x2F;material.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      body &#123;</span><br><span class="line">        margin: 2em;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;&#x2F;style&gt;</span><br><span class="line">    &lt;title&gt;XMLHttpRequest mixed content example&lt;&#x2F;title&gt;</span><br><span class="line">  &lt;&#x2F;head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div role&#x3D;&quot;main&quot;&gt;</span><br><span class="line">      &lt;h1&gt;</span><br><span class="line">        XMLHttpRequest mixed content example!</span><br><span class="line">      &lt;&#x2F;h1&gt;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        View page over: &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;xmlhttprequest-example.html&quot;&gt;HTTP&lt;&#x2F;a&gt; - &lt;a href&#x3D;&quot;https:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;xmlhttprequest-example.html&quot;&gt;HTTPS&lt;&#x2F;a&gt;</span><br><span class="line">      &lt;&#x2F;p&gt;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        This page constructs an HTTP URL dynamically in JavaScript, the URL is eventually used to load an insecure resource by XMLHttpRequest. When the xmlhttprequest-data.js file is requested by the browser, an attacker can inject code into the returned content and take control of the entire page. Thankfully, most modern browsers block this type of dangerous content by default and display an error in the JavaScript console. This can be seen when the page is viewed over HTTPS.</span><br><span class="line">      &lt;&#x2F;p&gt;</span><br><span class="line">      &lt;div id&#x3D;&quot;output&quot;&gt;Waiting for data...&lt;&#x2F;div&gt;</span><br><span class="line">      &lt;script&gt;</span><br><span class="line">        var rootUrl &#x3D; &#39;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#39;;</span><br><span class="line">        var resources &#x3D; &#123;</span><br><span class="line">          jsonData: &#39;&#x2F;xmlhttprequest-data.js&#39;</span><br><span class="line">        &#125;;</span><br><span class="line">        var request &#x3D; new XMLHttpRequest();</span><br><span class="line">        request.addEventListener(&#39;load&#39;, function() &#123;</span><br><span class="line">          var jsonData &#x3D; JSON.parse(request.responseText);</span><br><span class="line">          document.getElementById(&#39;output&#39;).innerHTML +&#x3D; &#39;&lt;br&gt;&#39; + jsonData.data;</span><br><span class="line">        &#125;);</span><br><span class="line">        request.open(&#39;GET&#39;, rootUrl + resources.jsonData, true);</span><br><span class="line">        request.send();</span><br><span class="line">      &lt;&#x2F;script&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">  (function(b,o,i,l,e,r)&#123;b.GoogleAnalyticsObject&#x3D;l;b[l]||(b[l]&#x3D;</span><br><span class="line">  function()&#123;(b[l].q&#x3D;b[l].q||[]).push(arguments)&#125;);b[l].l&#x3D;+new Date;</span><br><span class="line">  e&#x3D;o.createElement(i);r&#x3D;o.getElementsByTagName(i)[0];</span><br><span class="line">  e.src&#x3D;&#39;&#x2F;&#x2F;www.google-analytics.com&#x2F;analytics.js&#39;;</span><br><span class="line">  r.parentNode.insertBefore(e,r)&#125;(window,document,&#39;script&#39;,&#39;ga&#39;));</span><br><span class="line">  ga(&#39;create&#39;,&#39;UA-52746336-1&#39;);ga(&#39;send&#39;,&#39;pageview&#39;);</span><br><span class="line">  var isCompleted &#x3D; &#123;&#125;;</span><br><span class="line">  function sampleCompleted(sampleName)&#123;</span><br><span class="line">    if (ga &amp;&amp; !isCompleted.hasOwnProperty(sampleName)) &#123;</span><br><span class="line">      ga(&#39;send&#39;, &#39;event&#39;, &#39;WebCentralSample&#39;, sampleName, &#39;completed&#39;); </span><br><span class="line">      isCompleted[sampleName] &#x3D; true;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">  &lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://googlesamples.github.io/web-fundamentals/fundamentals/security/prevent-mixed-content/xmlhttprequest-example.html">试一下</a></p>
<p>下面的 <strong>HTTP</strong> 网址是在 JavaScript 中动态构建的，并且最终被 <code>XMLHttpRequest</code> 用于加载不安全的资源。 与上面简单的示例相似，当浏览器请求 <code>xmlhttprequest-data.js</code> 文件时，攻击者可以将代码注入返回的内容中，并控制整个页面。</p>
<p>大多数现代浏览器也会阻止这些危险的请求。</p>
<p><img src="https://developers.google.com/web/fundamentals/security/prevent-mixed-content/imgs/xmlhttprequest-mixed-content-error.png?hl=zh-cn" alt="混合内容：页面已通过 HTTPS 加载，但请求了不安全的 XMLHttpRequest 端点。此请求已被阻止，内容必须通过 HTTPS 提供。">Chrome 可阻止不安全的 XMLHttpRequest。</p>
<h3 id="图像库示例"><a href="#图像库示例" class="headerlink" title="图像库示例"></a>图像库示例</h3><p>使用 jQuery 灯箱加载不安全的图像。</p>
<p>查看通过 <strong>HTTPS</strong>—<a target="_blank" rel="noopener" href="https://googlesamples.github.io/web-fundamentals/fundamentals/security/prevent-mixed-content/image-gallery-example.html"><strong>https</strong>://googlesamples.github.io/web-fundamentals/…/image-gallery-example.html</a> 加载的此示例页面时 — 最初没有任何混合内容问题；但是当点击缩略图时，将通过 <strong>HTTP</strong> 加载完整尺寸的混合内容图像。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;edge&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1&quot;&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;fonts.googleapis.com&#x2F;icon?family&#x3D;Material+Icons&quot;&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;code.getmdl.io&#x2F;1.2.1&#x2F;material.indigo-pink.min.css&quot;&gt;</span><br><span class="line">    &lt;script defer src&#x3D;&quot;https:&#x2F;&#x2F;code.getmdl.io&#x2F;1.2.1&#x2F;material.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      body &#123;</span><br><span class="line">        margin: 2em;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;&#x2F;style&gt;</span><br><span class="line">    &lt;title&gt;Image gallery mixed content example&lt;&#x2F;title&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;www.gstatic.com&#x2F;external_hosted&#x2F;jquery2.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">      $(function() &#123;</span><br><span class="line">        $(&#39;.gallery&#39;).click(function(e) &#123;</span><br><span class="line">          e.preventDefault();</span><br><span class="line">          $(&#39;.overlay-foreground&#39;).css(&#39;background-image&#39;, &#39;url(&#39; + $(this).attr(&#39;href&#39;) + &#39;)&#39;);</span><br><span class="line">          $(&#39;.overlay&#39;).fadeIn(&#39;slow&#39;);</span><br><span class="line">        &#125;)</span><br><span class="line">        $(&#39;.overlay&#39;).click(function() &#123;</span><br><span class="line">          $(&#39;.overlay&#39;).fadeOut(&#39;slow&#39;);</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;);</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      .overlay &#123;</span><br><span class="line">        position: fixed;</span><br><span class="line">        top: 0;</span><br><span class="line">        left: 0;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 100%;</span><br><span class="line">      &#125;</span><br><span class="line">      .overlay-background &#123;</span><br><span class="line">        background-color: #000;</span><br><span class="line">        filter:alpha(opacity&#x3D;80);</span><br><span class="line">        -moz-opacity: 0.8;</span><br><span class="line">        -khtml-opacity: 0.8;</span><br><span class="line">        opacity: 0.8;</span><br><span class="line">        z-index: 10000;</span><br><span class="line">      &#125;</span><br><span class="line">      .overlay-foreground &#123;</span><br><span class="line">        background-position: center center;</span><br><span class="line">        background-repeat: no-repeat;</span><br><span class="line">        z-index: 10001;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;&#x2F;style&gt;</span><br><span class="line">  &lt;&#x2F;head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div role&#x3D;&quot;main&quot;&gt;</span><br><span class="line">      &lt;h1&gt;</span><br><span class="line">        Image gallery mixed content!</span><br><span class="line">      &lt;&#x2F;h1&gt;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        View page over: &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;image-gallery-example.html&quot;&gt;HTTP&lt;&#x2F;a&gt; - &lt;a href&#x3D;&quot;https:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;image-gallery-example.html&quot;&gt;HTTPS&lt;&#x2F;a&gt;</span><br><span class="line">      &lt;&#x2F;p&gt;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        Image galleries often rely on the &lt;img&gt; tag src attribute to display thumbnail images on the page, the anchor ( &lt;a&gt; ) tag href attribute is then used to load the full sized image for the gallery overlay. Normally &lt;a&gt; tags do not cause mixed content, but in this case the jQuery code overrides the default link behavior &amp;mdash; to navigate to a new page &amp;mdash; and instead loads the HTTP image on this page. While this content isn&#39;t blocked, modern browsers display a warning in the JavaScript console. This can be seen when the page is viewed over HTTPS and the thumbnail is clicked.</span><br><span class="line">      &lt;&#x2F;p&gt;</span><br><span class="line">      CLICK ME! --&gt;</span><br><span class="line">      &lt;a class&#x3D;&quot;gallery&quot; href&#x3D;&quot;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;puppy.jpg&quot;&gt;</span><br><span class="line">        &lt;img src&#x3D;&quot;https:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;puppy-thumb.jpg&quot;&gt;</span><br><span class="line">      &lt;&#x2F;a&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;overlay overlay-background&quot; style&#x3D;&quot;display: none;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;overlay overlay-foreground&quot; style&#x3D;&quot;display: none;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">  (function(b,o,i,l,e,r)&#123;b.GoogleAnalyticsObject&#x3D;l;b[l]||(b[l]&#x3D;</span><br><span class="line">  function()&#123;(b[l].q&#x3D;b[l].q||[]).push(arguments)&#125;);b[l].l&#x3D;+new Date;</span><br><span class="line">  e&#x3D;o.createElement(i);r&#x3D;o.getElementsByTagName(i)[0];</span><br><span class="line">  e.src&#x3D;&#39;&#x2F;&#x2F;www.google-analytics.com&#x2F;analytics.js&#39;;</span><br><span class="line">  r.parentNode.insertBefore(e,r)&#125;(window,document,&#39;script&#39;,&#39;ga&#39;));</span><br><span class="line">  ga(&#39;create&#39;,&#39;UA-52746336-1&#39;);ga(&#39;send&#39;,&#39;pageview&#39;);</span><br><span class="line">  var isCompleted &#x3D; &#123;&#125;;</span><br><span class="line">  function sampleCompleted(sampleName)&#123;</span><br><span class="line">    if (ga &amp;&amp; !isCompleted.hasOwnProperty(sampleName)) &#123;</span><br><span class="line">      ga(&#39;send&#39;, &#39;event&#39;, &#39;WebCentralSample&#39;, sampleName, &#39;completed&#39;);</span><br><span class="line">      isCompleted[sampleName] &#x3D; true;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">  &lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://googlesamples.github.io/web-fundamentals/fundamentals/security/prevent-mixed-content/image-gallery-example.html">试一下</a></p>
<p>图像库通常依靠 <code>&lt;img&gt;</code> 标记 <code>src</code> 属性在页面上显示缩略图，然后，使用定位 (<code>&lt;a&gt;</code>) 标记 <code>href</code> 属性为图像库叠加层加载完整尺寸的图像。正常情况下，<code>&lt;a&gt;</code> 标记不会产生混合内容，但在此例中，jQuery 代码替换默认链接行为（导航到新页面），改为在此页面上加载 <strong>HTTP</strong> 图像。</p>
<p><img src="https://developers.google.com/web/fundamentals/security/prevent-mixed-content/imgs/image-gallery-warning.png?hl=zh-cn" alt="混合内容：页面已通过 HTTPS 加载，但请求了不安全的图像。此内容也应通过 HTTPS 提供。"></p>
<p>不安全的图像会降低网站的安全性，但是它们的危险性与其他类型的混合内容不一样。 现代浏览器仍会加载混合内容图像，但也会向用户显示警告。</p>
<h2 id="混合内容类型与相关安全威胁"><a href="#混合内容类型与相关安全威胁" class="headerlink" title="混合内容类型与相关安全威胁"></a>混合内容类型与相关安全威胁</h2><p>混合内容有两种：主动混合内容和被动混合内容</p>
<p><strong>被动混合内容</strong>指的是不与页面其余部分进行交互的内容，从而使中间人攻击在拦截或更改该内容时能够执行的操作受限。被动混合内容包括图像、视频和音频内容，以及无法与页面其余部分进行交互的其他资源。</p>
<p><strong>主动混合内容</strong>作为整体与页面进行交互，并且几乎允许攻击者对页面进行任何操作。 主动混合内容包括浏览器可下载和执行的脚本、样式表、iframe、flash 资源及其他代码。</p>
<h3 id="被动混合内容"><a href="#被动混合内容" class="headerlink" title="被动混合内容"></a>被动混合内容</h3><p>被动混合内容仍会给您的网站和用户带来安全威胁。 例如，攻击者可以拦截针对网站上的图像的 HTTP 请求，调换或更换这些图像；此攻击者可以调换“save and delete”按钮图像，导致您的用户无意间删除内容；将您的产品图表更换为下流或淫秽内容，从而损害您的网站；或将您的产品图像更换为不同网站或产品的广告。</p>
<p>即使攻击者不改变您的网站内容，您仍面临严重的隐私问题，攻击者可以使用混合内容请求跟踪用户。攻击者可以基于浏览器加载的图像或其他资源了解用户访问哪些页面，以及查看了哪些产品。</p>
<p>以下是被动混合内容的示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;edge&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1&quot;&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;fonts.googleapis.com&#x2F;icon?family&#x3D;Material+Icons&quot;&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;code.getmdl.io&#x2F;1.2.1&#x2F;material.indigo-pink.min.css&quot;&gt;</span><br><span class="line">    &lt;script defer src&#x3D;&quot;https:&#x2F;&#x2F;code.getmdl.io&#x2F;1.2.1&#x2F;material.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      body &#123;</span><br><span class="line">        margin: 2em;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;&#x2F;style&gt;</span><br><span class="line">    &lt;title&gt;Passive mixed content example&lt;&#x2F;title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      audio, img, video &#123;</span><br><span class="line">        display: block;</span><br><span class="line">        margin: 10px;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;&#x2F;style&gt;</span><br><span class="line">  &lt;&#x2F;head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div role&#x3D;&quot;main&quot;&gt;</span><br><span class="line">      &lt;h1&gt;</span><br><span class="line">        Passive mixed content!</span><br><span class="line">      &lt;&#x2F;h1&gt;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        View page over: &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;passive-mixed-content.html&quot;&gt;HTTP&lt;&#x2F;a&gt; - &lt;a href&#x3D;&quot;https:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;passive-mixed-content.html&quot;&gt;HTTPS&lt;&#x2F;a&gt;</span><br><span class="line">      &lt;&#x2F;p&gt;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        Several examples of passive mixed content. When viewed over HTTPS most browsers do &lt;b&gt;not&lt;&#x2F;b&gt; block this content but instead display warnings in the JavaScript console.</span><br><span class="line">      &lt;&#x2F;p&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- An insecure audio file loaded on a secure page --&gt;</span><br><span class="line">      &lt;audio src&#x3D;&quot;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;sleep.mp3&quot; type&#x3D;&quot;audio&#x2F;mp3&quot; controls&gt;&lt;&#x2F;audio&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- An insecure image loaded on a secure page --&gt;</span><br><span class="line">      &lt;img src&#x3D;&quot;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;puppy.jpg&quot;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- An insecure video file loaded on a secure page --&gt;</span><br><span class="line">      &lt;video src&#x3D;&quot;http:&#x2F;&#x2F;storage.googleapis.com&#x2F;webfundamentals-assets&#x2F;videos&#x2F;chrome.webm&quot; type&#x3D;&quot;video&#x2F;webm&quot; controls&gt;&lt;&#x2F;video&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">  (function(b,o,i,l,e,r)&#123;b.GoogleAnalyticsObject&#x3D;l;b[l]||(b[l]&#x3D;</span><br><span class="line">  function()&#123;(b[l].q&#x3D;b[l].q||[]).push(arguments)&#125;);b[l].l&#x3D;+new Date;</span><br><span class="line">  e&#x3D;o.createElement(i);r&#x3D;o.getElementsByTagName(i)[0];</span><br><span class="line">  e.src&#x3D;&#39;&#x2F;&#x2F;www.google-analytics.com&#x2F;analytics.js&#39;;</span><br><span class="line">  r.parentNode.insertBefore(e,r)&#125;(window,document,&#39;script&#39;,&#39;ga&#39;));</span><br><span class="line">  ga(&#39;create&#39;,&#39;UA-52746336-1&#39;);ga(&#39;send&#39;,&#39;pageview&#39;);</span><br><span class="line">  var isCompleted &#x3D; &#123;&#125;;</span><br><span class="line">  function sampleCompleted(sampleName)&#123;</span><br><span class="line">    if (ga &amp;&amp; !isCompleted.hasOwnProperty(sampleName)) &#123;</span><br><span class="line">      ga(&#39;send&#39;, &#39;event&#39;, &#39;WebCentralSample&#39;, sampleName, &#39;completed&#39;);</span><br><span class="line">      isCompleted[sampleName] &#x3D; true;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">  &lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://googlesamples.github.io/web-fundamentals/fundamentals/security/prevent-mixed-content/passive-mixed-content.html">试一下</a></p>
<p>大多数浏览器仍向用户渲染此类型的混合内容，但是也会显示警告，因为这些内容会给您的网站和用户带来安全风险和隐私风险。</p>
<p><img src="https://developers.google.com/web/fundamentals/security/prevent-mixed-content/imgs/passive-mixed-content-warnings.png?hl=zh-cn" alt="混合内容：页面已通过 HTTPS 加载，但请求了不安全的视频。此内容也应通过 HTTPS 提供。">来自 Chrome JavaScript 控制台的混合内容警告。</p>
<h3 id="主动混合内容"><a href="#主动混合内容" class="headerlink" title="主动混合内容"></a>主动混合内容</h3><p>与被动混合内容相比，主动混合内容造成的威胁更大。攻击者可以拦截和重写主动内容，从而完全控制页面，甚至整个网站。这让攻击者可以更改有关页面的任何内容，包括显示完全不同的内容、窃取用户密码或其他登录凭据、窃取用户会话 Cookie，或将用户重定向到一个完全不同的网站。</p>
<p>鉴于这种威胁的严重性，许多浏览器都会默认阻止此类型的内容以保护用户，但是其作用因浏览器供应商和版本而有所差异。</p>
<p>以下包含主动混合内容的示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;edge&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1&quot;&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;fonts.googleapis.com&#x2F;icon?family&#x3D;Material+Icons&quot;&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;code.getmdl.io&#x2F;1.2.1&#x2F;material.indigo-pink.min.css&quot;&gt;</span><br><span class="line">    &lt;script defer src&#x3D;&quot;https:&#x2F;&#x2F;code.getmdl.io&#x2F;1.2.1&#x2F;material.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      body &#123;</span><br><span class="line">        margin: 2em;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;&#x2F;style&gt;</span><br><span class="line">    &lt;title&gt;Active mixed content example&lt;&#x2F;title&gt;</span><br><span class="line">    &lt;!-- An insecure script file loaded on a secure page --&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;simple-example.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- An insecure stylesheet loaded on a secure page --&gt;</span><br><span class="line">    &lt;link href&#x3D;&quot;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;style.css&quot; rel&#x3D;&quot;stylesheet&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      .insecure-background &#123;</span><br><span class="line">        &#x2F;* An insecure resources loaded from a style property on a secure page, this can</span><br><span class="line">           happen in many places including, @font-face, cursor, background-image, and so on. *&#x2F;</span><br><span class="line">        background: url(&#39;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;puppy-thumb.jpg&#39;) no-repeat;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;&#x2F;style&gt;</span><br><span class="line"></span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      .insecure-style-holder span &#123;</span><br><span class="line">        color: #fff;</span><br><span class="line">      &#125;</span><br><span class="line">      .insecure-background &#123;</span><br><span class="line">        color: #000;</span><br><span class="line">        font-weight: bold;</span><br><span class="line">        background-position: left center;</span><br><span class="line">        background-repeat: no-repeat;</span><br><span class="line">        width: 300px;</span><br><span class="line">        height: 140px;</span><br><span class="line">      &#125;</span><br><span class="line">      iframe &#123;</span><br><span class="line">        width: 400px;</span><br><span class="line">        height: 300px;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;&#x2F;style&gt;</span><br><span class="line"></span><br><span class="line">  &lt;&#x2F;head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div role&#x3D;&quot;main&quot;&gt;</span><br><span class="line">      &lt;h1&gt;</span><br><span class="line">        Active mixed content!</span><br><span class="line">      &lt;&#x2F;h1&gt;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        View page over: &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;active-mixed-content.html&quot;&gt;HTTP&lt;&#x2F;a&gt; - &lt;a href&#x3D;&quot;https:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;active-mixed-content.html&quot;&gt;HTTPS&lt;&#x2F;a&gt;</span><br><span class="line">      &lt;&#x2F;p&gt;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        Several examples of active mixed content. When viewed over HTTPS most browsers block this content and display errors in the JavaScript console.</span><br><span class="line">      &lt;&#x2F;p&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;insecure-style-holder&quot;&gt;</span><br><span class="line">        &lt;span style&#x3D;&quot;ba&quot;&gt;Insecure style loaded&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;insecure-background&quot;&gt;</span><br><span class="line">        Loading insecure background here...</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;p&gt;Loading insecure iframe...&lt;&#x2F;p&gt;</span><br><span class="line">      &lt;!-- An insecure iframed page loaded on a secure page --&gt;</span><br><span class="line">      &lt;iframe src&#x3D;&quot;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;image-gallery-example.html&quot;&gt;&lt;&#x2F;iframe&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- Flash resources also qualify as active mixed content and pose a</span><br><span class="line">      serious security risk. Be sure to look for &lt;object&gt; tags with type set</span><br><span class="line">      to &quot;application&#x2F;x-shockwave-flash&quot;, and an http:&#x2F;&#x2F; data attribute. --&gt;</span><br><span class="line">      &lt;!-- &lt;object type&#x3D;&quot;application&#x2F;x-shockwave-flash&quot; data&#x3D;&quot;http:&#x2F;&#x2F;...&quot;&gt;&lt;&#x2F;object&gt; --&gt;</span><br><span class="line"></span><br><span class="line">      &lt;script&gt;</span><br><span class="line">        &#x2F;&#x2F; An insecure resource loaded using XMLHttpRequest</span><br><span class="line">        var request &#x3D; new XMLHttpRequest();</span><br><span class="line">        request.addEventListener(&#39;load&#39;, function() &#123;</span><br><span class="line">          var jsonData &#x3D; JSON.parse(request.responseText);</span><br><span class="line">          document.getElementById(&#39;output&#39;).innerHTML +&#x3D; &#39;&lt;br&gt;&#39; + jsonData.data;</span><br><span class="line">        &#125;);</span><br><span class="line">        request.open(&quot;GET&quot;, &quot;http:&#x2F;&#x2F;googlesamples.github.io&#x2F;web-fundamentals&#x2F;fundamentals&#x2F;security&#x2F;prevent-mixed-content&#x2F;xmlhttprequest-data.js&quot;, true);</span><br><span class="line">        request.send();</span><br><span class="line">      &lt;&#x2F;script&gt;</span><br><span class="line">      &lt;div id&#x3D;&quot;output&quot;&gt;Waiting for insecure script to run...&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">  (function(b,o,i,l,e,r)&#123;b.GoogleAnalyticsObject&#x3D;l;b[l]||(b[l]&#x3D;</span><br><span class="line">  function()&#123;(b[l].q&#x3D;b[l].q||[]).push(arguments)&#125;);b[l].l&#x3D;+new Date;</span><br><span class="line">  e&#x3D;o.createElement(i);r&#x3D;o.getElementsByTagName(i)[0];</span><br><span class="line">  e.src&#x3D;&#39;&#x2F;&#x2F;www.google-analytics.com&#x2F;analytics.js&#39;;</span><br><span class="line">  r.parentNode.insertBefore(e,r)&#125;(window,document,&#39;script&#39;,&#39;ga&#39;));</span><br><span class="line">  ga(&#39;create&#39;,&#39;UA-52746336-1&#39;);ga(&#39;send&#39;,&#39;pageview&#39;);</span><br><span class="line">  var isCompleted &#x3D; &#123;&#125;;</span><br><span class="line">  function sampleCompleted(sampleName)&#123;</span><br><span class="line">    if (ga &amp;&amp; !isCompleted.hasOwnProperty(sampleName)) &#123;</span><br><span class="line">      ga(&#39;send&#39;, &#39;event&#39;, &#39;WebCentralSample&#39;, sampleName, &#39;completed&#39;);</span><br><span class="line">      isCompleted[sampleName] &#x3D; true;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">  &lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://googlesamples.github.io/web-fundamentals/fundamentals/security/prevent-mixed-content/active-mixed-content.html">试一下</a></p>
<p><img src="https://developers.google.com/web/fundamentals/security/prevent-mixed-content/imgs/active-mixed-content-errors.png?hl=zh-cn" alt="混合内容：页面已通过 HTTPS 加载，但请求了不安全的资源。此请求已被阻止，内容必须通过 HTTPS 提供。">来自 Chrome JavaScript 控制台的混合内容错误。</p>
<h2 id="具有混合内容的浏览器行为"><a href="#具有混合内容的浏览器行为" class="headerlink" title="具有混合内容的浏览器行为"></a>具有混合内容的浏览器行为</h2><p>鉴于上述威胁，浏览器最好是阻止所有混合内容。 但是，这将破坏大量网站，而数百万用户每天都要访问这些网站。 当前的折衷做法是阻止最危险的混合内容类型，同时仍允许请求不太危险的混合内容类型。</p>
<p>现代浏览器遵循<a target="_blank" rel="noopener" href="https://w3c.github.io/webappsec/specs/mixedcontent/">混合内容规范</a>，其定义了<a target="_blank" rel="noopener" href="https://w3c.github.io/webappsec/specs/mixedcontent/#category-optionally-blockable"><strong>可选择性地阻止的内容</strong></a>和<a target="_blank" rel="noopener" href="https://w3c.github.io/webappsec/specs/mixedcontent/#category-blockable"><strong>可阻止的内容</strong></a>类别。</p>
<p>根据此规范，“当破坏网络重要部分的风险超过允许此资源作为混合内容使用的风险时”，该资源有资格成为可选择性阻止的内容；这是上述<a target="_blank" rel="noopener" href="https://developers.google.com/web/fundamentals/security/prevent-mixed-content/what-is-mixed-content?hl=zh-cn#passive-mixed-content">被动混合内容</a>类别的子集。在撰写本文时，可选择性阻止的内容中仅包括图像、视频和音频资源以及预获取的链接这些资源类型。随着时间的推移，此类别可能会缩小。</p>
<p><strong>可选择性阻止的内容</strong>以外的所有内容被视为<strong>可阻止的内容</strong>，将被浏览器阻止。</p>
<h3 id="浏览器版本"><a href="#浏览器版本" class="headerlink" title="浏览器版本"></a>浏览器版本</h3><p>切记，并不是网站的每个访问者都使用最新的浏览器。 不同浏览器供应商的不同版本的浏览器处理混合内容的方式不尽相同。 最糟糕的情况是，有些浏览器和版本根本不会阻止任何混合内容，这对于用户而言非常不安全。</p>
<p>每个浏览器的确切行为不断变化，因此，我们在这里不做具体介绍。 如果您对特定浏览器的行为方式感兴趣，请直接查看供应商发布的信息。</p>
<h3 id="缺少中间根证书"><a href="#缺少中间根证书" class="headerlink" title="缺少中间根证书"></a>缺少中间根证书</h3><p>还有一种情况是由于证书链不完整缺少中间根证书导致的。这个情况下<a target="_blank" rel="noopener" href="https://www.bisend.cn/blog/ruhezhaodaosslzhengshudezhongjiangenzhengshu">找到SSL证书的中间根证书</a>、补全证书链再重新安装即可解决问题。</p>
<p>以上即为几种常见的导致SSL证书部署后仍出现不安全提示的原因。如果一一排查之后还是不能解决问题，或者处理过程中不知该如何操作，可提交工单或在线联系必盛云客服为您处理。</p>
<h3 id="相关文章："><a href="#相关文章：" class="headerlink" title="相关文章："></a>相关文章：</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.bisend.cn/blog/comodozhengshuhebingjizhuanhuanjiaocheng">Comodo证书合并及转换教程</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bisend.cn/blog/digicertzhengshuhebingjizhuanhuanjiaocheng">Digicert、Symantec和Geotrust证书合并及转换教程</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bisend.cn/blog/shenqingsslzhengshuzenyangzuoyumingyanzheng">申请SSL证书怎样做域名验证</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bisend.cn/blog/ru-he-shen-qing-ov-ev-ssl-zheng-shu">如何申请OV/EV SSL 证书</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bisend.cn/blog/ruhebushusslzhengshu">如何部署SSL证书</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bisend.cn/blog/apachefuwuqianzhuangsslzhengshu">Apache服务器安装SSL证书</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bisend.cn/blog/ruhebeifenhuodaochusslzhengshu">如何备份或导出SSL证书</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bisend.cn/blog/ip-ssl-certificates">IP地址可以安装SSL证书吗？</a></li>
<li><a target="_blank" rel="noopener" href="https://developers.google.com/web/fundamentals/security/prevent-mixed-content/what-is-mixed-content?hl=zh-cn">混合内容</a></li>
</ul>

          
            <div class='article_footer'>
              
                
  
    
    



  

  
    
    



  

  
    
    

<section class="widget copyright  desktop mobile">
  <div class='content'>
    
      <blockquote>
        
          
            <p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</p>

          
        
          
            <p>本文永久链接是：<a href=https://gschaos.club/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%83%A8%E7%BD%B2SSL%E8%AF%81%E4%B9%A6%E5%90%8E%EF%BC%8C%E8%BF%98%E6%98%AF%E6%8F%90%E7%A4%BA%E4%B8%8D%E5%AE%89%E5%85%A8/>https://gschaos.club/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%83%A8%E7%BD%B2SSL%E8%AF%81%E4%B9%A6%E5%90%8E%EF%BC%8C%E8%BF%98%E6%98%AF%E6%8F%90%E7%A4%BA%E4%B8%8D%E5%AE%89%E5%85%A8/</a></p>
          
        
      </blockquote>
    
  </div>
</section>

  

  
    
    

<section class="widget qrcode  desktop mobile">
  

  <div class='content article-entry'>
    
  </div>
</section>

  


              
            </div>
          
        </div>
        
          


  <section class='meta' id="footer-meta">
    <div class='new-meta-box'>
      
        
          <div class="new-meta-item date" itemprop="dateUpdated" datetime="2020-09-10T16:31:36+08:00">
  <a class='notlink'>
    <i class="fas fa-edit fa-fw" aria-hidden="true"></i>
    <p>更新于：2020年9月10日</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>服务器</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/ssl/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>ssl</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/%E7%BD%91%E7%AB%99/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>网站</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/https/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>https</p></a></div>


        
      
        
          

        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://gschaos.club/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%83%A8%E7%BD%B2SSL%E8%AF%81%E4%B9%A6%E5%90%8E%EF%BC%8C%E8%BF%98%E6%98%AF%E6%8F%90%E7%A4%BA%E4%B8%8D%E5%AE%89%E5%85%A8/&title=为什么部署SSL证书后还是提示不安全 - MysticalYcc&summary=
很多朋友可能都会遇到这个让人抓狂的问题：为什么按要求部署SSL证书了，但访问网站时还是会出现不安全的提示？这里就和大家一起来看看可能导致这个问题的原因和解决方法。"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/qq.png">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://gschaos.club/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%83%A8%E7%BD%B2SSL%E8%AF%81%E4%B9%A6%E5%90%8E%EF%BC%8C%E8%BF%98%E6%98%AF%E6%8F%90%E7%A4%BA%E4%B8%8D%E5%AE%89%E5%85%A8/&title=为什么部署SSL证书后还是提示不安全 - MysticalYcc&summary=
很多朋友可能都会遇到这个让人抓狂的问题：为什么按要求部署SSL证书了，但访问网站时还是会出现不安全的提示？这里就和大家一起来看看可能导致这个问题的原因和解决方法。"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/qzone.png">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="http://service.weibo.com/share/share.php?url=https://gschaos.club/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%83%A8%E7%BD%B2SSL%E8%AF%81%E4%B9%A6%E5%90%8E%EF%BC%8C%E8%BF%98%E6%98%AF%E6%8F%90%E7%A4%BA%E4%B8%8D%E5%AE%89%E5%85%A8/&title=为什么部署SSL证书后还是提示不安全 - MysticalYcc&summary=
很多朋友可能都会遇到这个让人抓狂的问题：为什么按要求部署SSL证书了，但访问网站时还是会出现不安全的提示？这里就和大家一起来看看可能导致这个问题的原因和解决方法。"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/weibo.png">
          
        </a>
      
    
  </div>
</div>



        
      
    </div>
  </section>


        
        
          <div class="prev-next">
            
            
              <a class='next' href='/Nginx%20%E9%85%8D%E7%BD%AE/'>
                <p class='title'>Spring Cloud Gateway 读取、修改请求体（解决request body内容被截断）<i class="fas fa-chevron-right" aria-hidden="true"></i></p>
                <p class='content'>




Nginx 配置在了解具体的Nginx配置项之前我们需要对于Nginx配置文件的构成有所概念，一般来说，Nginx配置文件会由如下几个部分构成：
1234567891011121314...</p>
              </a>
            
          </div>
        
      </section>
    </article>
  

  
    

  <article class="post white-box reveal comments shadow">
    <section class="article typo">
      <p ct><i class='fas fa-comments'></i> 评论</p>
      
      <section id="comments">
        <div id="valine_container" class="valine_thread">
  <i class="fas fa-cog fa-spin fa-fw fa-2x"></i>
</div>

      </section>
    </section>
  </article>


  




<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->


</div>
<aside class='l_side'>
  
  

  
    
    



  <section class="widget toc-wrapper shadow desktop mobile" id="toc-div" >
    
  <header>
    
      <i class="fas fa-list fa-fw" aria-hidden="true"></i><span class='name'>本文目录</span>
    
  </header>


    <div class='content'>
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E4%B8%8D%E5%8C%B9%E9%85%8D"><span class="toc-text">域名不匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%81%E4%B9%A6%E5%88%B0%E6%9C%9F"><span class="toc-text">证书到期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4%E9%94%99%E8%AF%AF"><span class="toc-text">系统时间错误</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%8F%97%E4%BF%A1%E4%BB%BB%E7%9A%84SSL%E8%AF%81%E4%B9%A6"><span class="toc-text">不受信任的SSL证书</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%99%E5%86%85%E8%B0%83%E7%94%A8%E9%9D%9EHTTPS%E7%B4%A0%E6%9D%90"><span class="toc-text">站内调用非HTTPS素材</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TL-DR"><span class="toc-text">TL;DR</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E8%AF%B7%E6%B1%82%E5%92%8C%E7%BD%91%E7%BB%9C%E6%B5%8F%E8%A7%88%E5%99%A8"><span class="toc-text">资源请求和网络浏览器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTPS-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-text">HTTPS 的优势</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81"><span class="toc-text">身份验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-text">数据完整性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%9D%E5%AF%86%E6%80%A7"><span class="toc-text">保密性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTPS%E3%80%81%E4%BC%A0%E8%BE%93%E5%B1%82%E5%AE%89%E5%85%A8%E5%8D%8F%E8%AE%AE-TLS-%E5%92%8C-SSL"><span class="toc-text">HTTPS、传输层安全协议 (TLS) 和 SSL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B7%E5%90%88%E5%86%85%E5%AE%B9%E4%BC%9A%E9%99%8D%E4%BD%8E-HTTPS-%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7"><span class="toc-text">混合内容会降低 HTTPS 的安全性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%A4%BA%E4%BE%8B"><span class="toc-text">一个简单的示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA-XMLHttpRequest-%E7%A4%BA%E4%BE%8B"><span class="toc-text">一个 XMLHttpRequest 示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E5%BA%93%E7%A4%BA%E4%BE%8B"><span class="toc-text">图像库示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B7%E5%90%88%E5%86%85%E5%AE%B9%E7%B1%BB%E5%9E%8B%E4%B8%8E%E7%9B%B8%E5%85%B3%E5%AE%89%E5%85%A8%E5%A8%81%E8%83%81"><span class="toc-text">混合内容类型与相关安全威胁</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A2%AB%E5%8A%A8%E6%B7%B7%E5%90%88%E5%86%85%E5%AE%B9"><span class="toc-text">被动混合内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E5%8A%A8%E6%B7%B7%E5%90%88%E5%86%85%E5%AE%B9"><span class="toc-text">主动混合内容</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B7%E6%9C%89%E6%B7%B7%E5%90%88%E5%86%85%E5%AE%B9%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A1%8C%E4%B8%BA"><span class="toc-text">具有混合内容的浏览器行为</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%89%88%E6%9C%AC"><span class="toc-text">浏览器版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%BA%E5%B0%91%E4%B8%AD%E9%97%B4%E6%A0%B9%E8%AF%81%E4%B9%A6"><span class="toc-text">缺少中间根证书</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%96%87%E7%AB%A0%EF%BC%9A"><span class="toc-text">相关文章：</span></a></li></ol>
    </div>
  </section>


  


</aside>



    </div>
    
  
  <footer class="clearfix">
    <br><br>
    
      
        <div class="aplayer-container">
          

  
    <meting-js
      theme='#1BCDFC'
      autoplay='true'
      volume='0.7'
      loop='all'
      order='list'
      fixed='false'
      list-max-height='320px'
      server='netease'
      type='playlist'
      id='374088504'
      list-folded='true'>
    </meting-js>
  


        </div>
      
    
      
        <br>
        <div class="social-wrapper">
          
            
              <a href="/atom.xml"
                class="social fas fa-rss flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="mailto:568166723@qq.com"
                class="social fas fa-envelope flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://github.com/yccjack"
                class="social fab fa-github flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://music.163.com/#/user/home?id=272854615"
                class="social fas fa-headphones-alt flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
        </div>
      
    
      
        <div><p>博客内容遵循 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p>
</div>
      
    
      
        本站使用
        <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/3.0.0" target="_blank" class="codename">Volantis</a>
        作为主题，总访问量为
          <span id="busuanzi_value_site_pv"><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span>
          次
        
      
    
      
        <div class='copyright'>
        <p><a href="/">Copyright ©  皖ICP备19015872号-1</a></p>

        </div>
      
    
  </footer>


    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  <div>
    
      
  

  <div id="rightmenu-wrapper">
    <ul class="list-v rightmenu" id="rightmenu-content">
      <li class='option'>
        <a class='vlts-menu opt fix-cursor-default' id='menu-copy-text' onclick='document.execCommand("copy")'><i class='fa fa-copy fa-fw'></i>复制文本</a>
        <hr id='hr-text'>
        <a class='vlts-menu opt fix-cursor-default' id='menu-copy-href'><i class='fa fa-link fa-fw'></i>复制链接</a>
        <a class='vlts-menu opt fix-cursor-default' id='menu-open-href'><i class='fa fa-external-link-square-alt fa-fw'></i>在新标签页打开</a>
        <hr id='hr-href'>
        <a class='vlts-menu opt fix-cursor-default' id='menu-copy-src'><i class='fa fa-image fa-fw'></i>复制图片地址</a>
        <hr id='hr-src'>
      </li>
      <li class='navigation'>
        <a class='nav icon-only fix-cursor-default' onclick='history.back()'><i class='fa fa-arrow-left fa-fw'></i></a>
        <a class='nav icon-only fix-cursor-default' onclick='history.forward()'><i class='fa fa-arrow-right fa-fw'></i></a>
        <a class='nav icon-only fix-cursor-default' onclick='window.location.reload()'><i class='fa fa-redo fa-fw'></i></a>
        <a class='nav icon-only fix-cursor-default' href='/'><i class='fa fa-home fa-fw'></i></a>
      </li>
      <hr>
      
        
      
        
          
    <li>
      <a class='vlts-menu fix-cursor-default' href=https://volantis.js.org/faqs/
        
        
        
        
          id="https:volantisjsorgfaqs"
        >
        <i class='fab fa-github fa-fw'></i> GitHub
      </a>
    </li>
  
        
      
        
          
    <li>
      <a class='vlts-menu fix-cursor-default' href=https://blog.csdn.net/qq_17238449
        
        
        
        
          id="https:blogcsdnnetqq_17238449"
        >
        <i class='fas fa-blog fa-fw'></i> csdn
      </a>
    </li>
  
        
      
        
          
    <li>
      <a class='vlts-menu fix-cursor-default' href=https://www.gschaos.club/about/
        
        
        
        
          id="https:wwwgschaosclubabout"
        >
        <i class='fas fa-portrait fa-fw'></i> 关于本人
      </a>
    </li>
  
        
      
        
          <hr>
        
      
        
          
    <li>
      <a class='vlts-menu fix-cursor-default' href=https://github.com/yccjack/yccjack.github.io
        
        
        
        
          id="https:githubcomyccjackyccjackgithubio"
        >
        <i class='fa fa-code-branch fa-fw'></i> 本站源码
      </a>
    </li>
  
        
      
        
          
    <li>
      <a class='vlts-menu fix-cursor-default' href=https://github.com/volantis-x/hexo-theme-volantis/
        
        
        
        
          id="https:githubcomvolantis-xhexo-theme-volantis"
        >
        <i class='fa fa-code-branch fa-fw'></i> 主题源码
      </a>
    </li>
  
        
      
        
          <hr>
        
      
        
          
    <li>
      <a class='vlts-menu fix-cursor-default' 
        
        
        
          onclick="document.execCommand('print')"
        
        >
        <i class='fa fa-print fa-fw'></i> 打印页面
      </a>
    </li>
  
        
      
        
          <hr>
        
      
        
          <li class='music name'>
            <p class='nav music-title fix-cursor-default'></p>
          </li>
          <li class='music ctrl'>
            <a class='nav icon-only backward fix-cursor-default' onclick='aplayerBackward()'><i class='fa fa-step-backward fa-fw'></i></a>
            <a class='nav icon-only toggle fix-cursor-default' onclick='aplayerToggle()'><i class='fa fa-play fa-fw'></i></a>
            <a class='nav icon-only forward fix-cursor-default' onclick='aplayerForward()'><i class='fa fa-step-forward fa-fw'></i></a>
          </li>
          <li class='music volume'>
            <a class='nav volume'>
              <div class="aplayer-volume-bar-wrap">
                <div class="aplayer-volume-bar fix-cursor-pointer">
                  <div class="aplayer-volume"></div>
                  <i class='left fa fa-volume-off fa-fw'></i>
                  <i class='right fa fa-volume-up fa-fw'></i>
                </div>
              </div>
            </a>
          </li>
        
      
    </ul>
  </div>

  <script>
    window.document.oncontextmenu = function (event) {
      if (event.ctrlKey) return true;
      if (/Android|webOS|BlackBerry/i.test(navigator.userAgent)) return true;
      return popMenu(event);
    };
    document.addEventListener("click", function (event) {
      var mymenu = document.getElementById('rightmenu-wrapper');
      mymenu.style.display = "none";
    });
    function popMenu(event) {
      var mymenu = document.getElementById('rightmenu-wrapper');
      var menuContent = document.getElementById('rightmenu-content');
      var screenWidth = document.documentElement.clientWidth || document.body.clientWidth;
      var screenHeight = document.documentElement.clientHeight || document.body.clientHeight;
      mymenu.style.left = event.clientX + "px"; // 获取鼠标位置
      mymenu.style.top = event.clientY + "px";
      mymenu.style.display = 'block';
      if (event.clientX * 2 > screenWidth) {
        menuContent.classList.add('left');
      } else {
        menuContent.classList.remove('left');
      }
      if (event.clientY * 2 > screenHeight) {
        menuContent.classList.add('top');
      } else {
        menuContent.classList.remove('top');
      }

      let hrText = document.getElementById('hr-text');
      let hrSrc = document.getElementById('hr-src');
      let hrHref = document.getElementById('hr-href');

      // 选中图片
      let copySrc = document.getElementById('menu-copy-src');
      if (copySrc != undefined) {
        if (event.target.currentSrc) {
          copySrc.style.display = 'block';
          copySrc.addEventListener("click", function (e) {
            copyString(event.target.currentSrc);
          },{once: true});
          hrSrc.style.display = 'block';
        } else {
          copySrc.style.display = 'none';
          hrSrc.style.display = 'none';
        }
      }

      // 选中按钮
      // 判断是不是按钮
      let href = '';
      if (event.path) {
        for (i = 0; i < event.path.length; i++) {
          if (event.path[i].href != undefined && event.path[i].href.length > 0) {
            href = event.path[i].href;
          }
        }
      }

      let copyText = document.getElementById('menu-copy-text');
      copyText.style.display = 'none';
      hrText.style.display = 'none';
      if (href.length == 0) {
        // 选中文本
        if (window.getSelection().toString()) {
          copyText.style.display = 'block';
          hrText.style.display = 'block';
        }
      }

      // 在新标签页打开
      let openHref = document.getElementById('menu-open-href');
      if (openHref != undefined) {
        if (href.length > 0) {
          openHref.style.display = 'block';
          openHref.addEventListener("click", function (e) {
            window.open(href);
          },{once: true});
          hrHref.style.display = 'block';
        } else {
          openHref.style.display = 'none';
          hrHref.style.display = 'none';
        }
      }
      // 复制链接
      let copyHref = document.getElementById('menu-copy-href');
      if (copyHref != undefined) {
        if (href.length > 0) {
          copyHref.style.display = 'block';
          copyHref.addEventListener("click", function (e) {
            copyString(href);
          },{once: true});
        } else {
          copyHref.style.display = 'none';
        }
      }

      // 有音乐播放器
      if (true == true) {
        // 如果有aplayer，初始化一下
      	try {
      		checkAPlayer();
          updateTitle();
      	} catch (error) {
      		console.log(error);
      	}
      }

      return false; // 该行代码确保系统自带的右键菜单不会被调出
    }
    function hideMenu() {
      document.getElementById('rightmenu-wrapper').style.display = 'none';
    }
    function copyString(str) {
      const input = document.createElement('input');
      input.setAttribute('readonly', 'readonly');
      document.body.appendChild(input);
      input.setAttribute('value', str);
      input.select();
      document.execCommand('copy');
      document.body.removeChild(input);
    }
    document.execCommand('click');
  </script>


    
    
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5/dist/jquery.min.js"></script>



  <script>
    
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/" || "/";
    if (!ROOT.endsWith('/')) ROOT += '/';
  </script>



  <script async src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@2/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>



  
  
  
    
<script src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script>

    <script type="text/javascript">
      $(function(){
        var imgs=["https://mysticalyu.gitee.io/pic/img/a-i-20.jpg", "https://mysticalyu.gitee.io/pic/img/73vek3.jpg", "https://mysticalyu.gitee.io/pic/img/aniraiden-wu-final003-00000.jpg", "https://mysticalyu.gitee.io/pic/img/bora-kim-1-thumbnail2.jpg", "https://mysticalyu.gitee.io/pic/img/cat-lazy-fengmian.jpg", "https://mysticalyu.gitee.io/pic/img/gyul-bae-templar-20-g.jpg", "https://mysticalyu.gitee.io/pic/img/yueyang.jpg"];
        if ('true' == 'true') {
          function shuffle(arr){
            /*From countercurrent-time*/
            var n = arr.length;
            while(n--) {
              var index = Math.floor(Math.random() * n);
              var temp = arr[index];
              arr[index] = arr[n];
              arr[n] = temp;
            }
          }
          shuffle(imgs);
        }
        if ('.cover') {
          $('.cover').backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        } else {
          $.backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        }
      });
    </script>
  



  <script>
    let APlayerController = new Object();
    APlayerController.id = '374088504';  // 设定全局音乐播放ID
    APlayerController.volume = '0.7';
  </script>
  
    
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>

  
    
<script src="https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js"></script>

  
    
<script src="/js/aplayer.js"></script>

  




  
  
<script src="/js/valine.js"></script>


<script>
  var GUEST_INFO = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link'.split(',').filter(function (item) {
    return GUEST_INFO.indexOf(item) > -1
  });
  var REQUIRED_FIELDS = ['nick', 'mail', 'link'];
  var requiredFields = 'nick,mail'.split(',').filter(function (item) {
    return REQUIRED_FIELDS.indexOf(item) > -1
  });

  function emoji(path, idx, ext) {
    return path + "/" + path + "-" + idx + "." + ext;
  }

  var emojiMaps = {};
  for (var i = 1; i <= 54; i++) {
    emojiMaps['tieba-' + i] = emoji('tieba', i, 'png');
  }
  for (var i = 1; i <= 101; i++) {
    emojiMaps['qq-' + i] = emoji('qq', i, 'gif');
  }
  for (var i = 1; i <= 116; i++) {
    emojiMaps['aru-' + i] = emoji('aru', i, 'gif');
  }
  for (var i = 1; i <= 125; i++) {
    emojiMaps['twemoji-' + i] = emoji('twemoji', i, 'png');
  }
  for (var i = 1; i <= 4; i++) {
    emojiMaps['weibo-' + i] = emoji('weibo', i, 'png');
  }

  function pjax_valine() {
    let pageUrl = $.trim($('#pjax-comment-path').text()) === "none" ? 
      decodeURI(window.location.pathname) : $.trim($('#pjax-comment-path').text());
    let pagePlaceholder = $.trim($('#pjax-comment-placeholder').text()) === "none" ?
      "快来评论吧~" : $.trim($('#pjax-comment-placeholder').text());

    let ALLPATH = '';
    if(ALLPATH != '') pageUrl = ALLPATH;

    var valine = new Valine();
    valine.init({
      el: '#valine_container',
      meta: meta,
      placeholder: pagePlaceholder,
      path: pageUrl,
      appId: "J2f6Gx43ptrGYdf1rHPAS5sJ-gzGzoHsz",
      appKey: "cSywIQR7CfBFaNI8iiPTYy41",
      pageSize: '10',
      avatar: 'robohash',
      lang: 'zh-cn',
      visitor: 'true',
      highlight: 'true',
      mathJax: 'false',
      enableQQ: 'true',
      requiredFields: requiredFields,
      emojiCDN: 'https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/valine/',
      emojiMaps: emojiMaps
    })
  }

  $(function () {
    pjax_valine();
  });
</script>




<!-- darkmodejs -->


<!-- 复制 -->

  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
    var clipboard = new ClipboardJS('.btn-copy', {
        target: function (trigger) {
            return trigger.nextElementSibling
        }
    });
    function wait(callback, seconds) {
        var timelag = null;
        timelag = window.setTimeout(callback, seconds)
    }
    function pjax_initCopyCode() {
        var copyHtml = '';
        copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
        copyHtml += '<i class="fas fa-copy"></i><span>COPY</span>';
        copyHtml += '</button>';
        $(".highlight .code pre").before(copyHtml);
        $(".article pre code").before(copyHtml);
        clipboard.off('success').on('success', function (e) {
            let $btn = $(e.trigger);
            $btn.addClass('copied');
            let $icon = $($btn.find('i'));
            $icon.removeClass('fa-copy');
            $icon.addClass('fa-check-circle');
            let $span = $($btn.find('span'));
            $span[0].innerText = 'COPIED';
            wait(function () {
                $icon.removeClass('fa-check-circle');
                $icon.addClass('fa-copy');
                $span[0].innerText = 'COPY'
            }, 2000)
        });
        clipboard.off('error').on('error', function (e) {
            e.clearSelection();
            let $btn = $(e.trigger);
            $btn.addClass('copy-failed');
            let $icon = $($btn.find('i'));
            $icon.removeClass('fa-copy');
            $icon.addClass('fa-times-circle');
            let $span = $($btn.find('span'));
            $span[0].innerText = 'COPY FAILED';
            wait(function () {
                $icon.removeClass('fa-times-circle');
                $icon.addClass('fa-copy');
                $span[0].innerText = 'COPY'
            }, 2000)
        })
    }
    $(function () {
        pjax_initCopyCode()
    });
</script>


<!-- scrollreveal -->

  <script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.6/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    function pjax_scrollrebeal() {
      ScrollReveal().reveal('.l_main .reveal', {
        distance: '32px',
        duration: '800',
        interval: '20',
        scale: '1',
        easing: 'ease-out'
      });
    }

    $(function () {
      pjax_scrollrebeal();
    });
  </script>

<!-- ******************************** -->

<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  function pjax_fancybox() {
    $(".article-entry").find("img").not('.inline').not('a img').each(function () { //渲染 fancybox
      var element = document.createElement("a"); // a 标签
      $(element).attr("class", "fancybox");
      $(element).attr("pjax-fancybox", "");  // 过滤 pjax
      $(element).attr("href", $(this).attr("src"));
      if ($(this).attr("data-original")) {
        $(element).attr("href", $(this).attr("data-original"));
      }
      $(element).attr("data-fancybox", "images");
      var caption = "";   // 描述信息
      if ($(this).attr('alt')) {  // 判断当前页面是否存在描述信息
        $(element).attr('data-caption', $(this).attr('alt'));
        caption = $(this).attr('alt');
      }
      var div = document.createElement("div");
      $(div).addClass("fancybox");
      $(this).wrap(div); // 最外层套 div ，其实主要作用还是 class 样式
      var span = document.createElement("span");
      $(span).addClass("image-caption");
      $(span).text(caption); // 加描述
      $(this).after(span);  // 再套一层描述
      $(this).wrap(element);  // 最后套 a 标签
    })
    $(".article-entry").find("img").fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
      closeClick: true,
      helpers: {
        overlay: {closeClick: true}
      },
      buttons: [
        "zoom",
        "close"
      ]
    });
  };
  $(function () {
    pjax_fancybox();
  });
</script>

<!-- ******************************** -->


  
<script src="/js/app.js"></script>




  
    
<script src="/js/search.js"></script>

  



  <script defer src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js" data-pjax></script>



  
<script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>

  <script type="text/javascript">
    $(function () {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>








    
      


<script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script>

<!-- 样式位于：source/css/_third-party/pjaxanimate.styl -->

<div class="pjax-animate">
  
    <script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>
    <div id="loading-bar-wrapper"><script>NProgress.configure({parent:"#loading-bar-wrapper",trickleSpeed: 100})</script></div>
    <script>
      window.ShowLoading = function() {
        NProgress.start();
      };
      window.HideLoading = function() {
        NProgress.done();
      }
    </script>
  
</div>

<script>
    var pjax;
    document.addEventListener('DOMContentLoaded', function () {
      pjax = new Pjax({
        elements: 'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([pjax-fancybox])',
        selectors: [
          "title",
          "#pjax-container",
          "#pjax-header-nav-list"
        ],
        cacheBust: false,   // url 地址追加时间戳，用以避免浏览器缓存
        timeout: 5000
      });
    });

    document.addEventListener('pjax:send', function (e) {
      window.stop(); // 相当于点击了浏览器的停止按钮

      try {
        var currentUrl = window.location.pathname;
        var targetUrl = e.triggerElement.href;
        var banUrl = [""];
        if (banUrl[0] != "") {
          banUrl.forEach(item => {
            if(currentUrl.indexOf(item) != -1 || targetUrl.indexOf(item) != -1) {
              window.location.href = targetUrl;
            }
          });
        }
      } catch (error) {}

      window.subData = null; // 移除标题（用于一二级导航栏切换处）
      $.fancybox.close();    // 关闭弹窗
      $('.l_header .switcher .s-search').removeClass('active'); // 关闭移动端激活的搜索框
      $('.l_header').removeClass('z_search-open'); // 关闭移动端激活的搜索框
      $('.wrapper').removeClass('sub'); // 跳转页面时关闭二级导航

      // 解绑事件 避免重复监听
      $('.s-top').unbind('click');
      $('.menu a').unbind('click');
      $(window).unbind('resize');
      $(window).unbind('scroll');
      $(document).unbind('scroll');
      $(document).unbind('click');
      $('body').unbind('click');
      window.ShowLoading();
    });

    document.addEventListener('pjax:complete', function () {
      // 关于百度统计对 SPA 页面的处理：
      // 方案一：百度统计>管理>单页应用设置中，打开开启按钮即可对SPA进行统计。 https://tongji.baidu.com/web/help/article?id=324
      // 方案二：取消注释下列代码。 https://tongji.baidu.com/web/help/article?id=235
      // 

      // 关于谷歌统计对 SPA 页面的处理：
      // 当应用以动态方式加载内容并更新地址栏中的网址时，也应该更新通过 gtag.js 存储的网页网址。
      // https://developers.google.cn/analytics/devguides/collection/gtagjs/single-page-applications?hl=zh-cn
      

      $('.nav-main').find('.list-v').not('.menu-phone').removeAttr("style",""); // 移除小尾巴的移除
      $('.menu-phone.list-v').removeAttr("style",""); // 移除小尾巴的移除
      $('script[data-pjax], .pjax-reload script').each(function () {
        $(this).parent().append($(this).remove());
      });

      try{
        pjax_fancybox();
        
          
          if ('.cover') {
            $('.cover').backstretch("resize");
          } else {
            $.backstretch("resize");
          }
        
        
        
          pjax_scrollrebeal();
        
        
          pjax_initCopyCode();
        
        
          pjax_valine();
        
        
        
        
        
      } catch (e) {
        console.log(e);
      }
      window.HideLoading();
    });

    document.addEventListener('pjax:error', function (e) {
      window.HideLoading();
      window.location.href = e.triggerElement.href;
    });
</script>

    
  </div>
</body>
</html>
